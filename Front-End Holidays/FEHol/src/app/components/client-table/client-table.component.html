<button nz-button nzType="primary" (click)=showModalCreator()>Add new client</button>
<form #newClientForm="ngForm" class="client-input-form" (ngSubmit)="onSubmit(newClientForm)">
  <nz-modal [(nzVisible)]="isVisibleCreator" [nzTitle]="modalTitl" [nzContent]="modalConten" [nzFooter]="modalFoote"
    (nzOnCancel)="handleCancelCreator()">
    <ng-template #modalTitl>
      Add new client
    </ng-template>

    <ng-template #modalConten>
      <mat-card>
        <div>
          <mat-form-field>
            <input matInput [(ngModel)]="newClient.companyName" type="text" name="companyName"
              placeholder="Company name" required #nameInput="ngModel">
            <mat-error *ngIf="nameInput.invalid && (nameInput.dirty || nameInput.touched)" class="error">
              Company name cannot be empty.
            </mat-error>
          </mat-form-field>
        </div>
        <div>
          <mat-form-field>
            <input matInput [(ngModel)]="newClient.ownerName" type="text" name="ownerName" placeholder="Owner name"
              required #nameInput="ngModel">
            <mat-error *ngIf="nameInput.invalid && (nameInput.dirty || nameInput.touched)" class="error">
              Owner name cannot be empty.
            </mat-error>
          </mat-form-field>
        </div>
        <div>
          <mat-form-field>
            <input matInput [(ngModel)]="newClient.ownerSurname" type="text" name="ownerSurname"
              placeholder="Owner surname" required #nameInput="ngModel">
            <mat-error *ngIf="nameInput.invalid && (nameInput.dirty || nameInput.touched)" class="error">
              Owner surname cannot be empty.
            </mat-error>
          </mat-form-field>
        </div>
        <div>
          <mat-form-field>
            <input matInput [(ngModel)]="newClient.ownerEmail" type="email" name="ownerEmail" placeholder="Owner email"
              required #nameInput="ngModel" pattern="[a-zA-Z0-9.-]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{3,}">
            <mat-error *ngIf="nameInput.invalid && (nameInput.dirty || nameInput.touched)" class="error">
              Owner email cannot be empty.
            </mat-error>
          </mat-form-field>
        </div>
        <div>
          <mat-form-field>
            <input matInput [(ngModel)]="newClient.ownerPhone" type="text" name="ownerPhone" placeholder="Owner phone"
              required #nameInput="ngModel">
            <mat-error *ngIf="nameInput.invalid && (nameInput.dirty || nameInput.touched)" class="error">
              Owner phone cannot be empty.
            </mat-error>
          </mat-form-field>
        </div>
      </mat-card>
    </ng-template>

    <ng-template #modalFoote>
      <button nz-button nzType="default" (click)="handleCancelCreator()">Cancel</button>
      <button nz-button nzType="primary" (click)="onAddButtonClick(newClient)" [nzLoading]="isConfirmLoadingCreator" [disabled]="newClientForm.form.invalid">Add client</button>
    </ng-template>
  </nz-modal>
</form>

<nz-table #basicTable [nzData]="client">
  <thead>
    <tr>
      <th nzCustomFilter>Company name
        <i class="ant-table-filter-icon" nz-icon nz-dropdown #dropdown="nzDropdown" nzType="search"
          [nzDropdownMenu]="menu" [class.ant-table-filter-open]="dropdown.nzVisible" nzTrigger="click"
          nzPlacement="bottomRight" [nzClickHide]="false" nzTableFilter></i>
      </th>
      <th>Owner Name</th>
      <th>Owner Surname</th>
      <th>Owner email</th>
      <th>Owner phone</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let clien of basicTable.data">
      <td>{{clien.companyName}}</td>
      <td>{{clien.ownerName}}</td>
      <td>{{clien.ownerSurname}}</td>
      <td>{{clien.ownerEmail}}</td>
      <td>{{clien.ownerPhone}}</td>
      <td>
        <button nz-button nzType="primary"
          (click)="showModalEditor(); populateFormNoId(clien); populateForm(clien)">Edit</button>
      </td>
    </tr>
    <form #editClientForm="ngForm" class="client-input-form" (ngSubmit)="onSubmit(editClientForm)">
      <nz-modal [(nzVisible)]="isVisibleEditor" [nzTitle]="modalTitle" [nzContent]="modalContent"
        [nzFooter]="modalFooter" (nzOnCancel)="handleCancelEditor()">
        <ng-template #modalTitle>
          Edit client
        </ng-template>
        <ng-template #modalContent>
          <mat-card>
            <div>
              <mat-form-field>
                <input matInput [(ngModel)]="formDataNoId.companyName" type="text" name="companyName"
                  placeholder="Company name" required #nameInput="ngModel">
                <mat-error *ngIf="nameInput.invalid && (nameInput.dirty || nameInput.touched)" class="error">
                  Company name cannot be empty.
                </mat-error>
              </mat-form-field>
            </div>
            <div>
              <mat-form-field>
                <input matInput [(ngModel)]="formDataNoId.ownerName" type="text" name="ownerName"
                  placeholder="Owner name" required #nameInput="ngModel">
                <mat-error *ngIf="nameInput.invalid && (nameInput.dirty || nameInput.touched)" class="error">
                  Owner name cannot be empty.
                </mat-error>
              </mat-form-field>
            </div>
            <div>
              <mat-form-field>
                <input matInput [(ngModel)]="formDataNoId.ownerSurname" type="text" name="ownerSurname"
                  placeholder="Owner surname" required #nameInput="ngModel">
                <mat-error *ngIf="nameInput.invalid && (nameInput.dirty || nameInput.touched)" class="error">
                  Owner surname cannot be empty.
                </mat-error>
              </mat-form-field>
            </div>
            <div>
              <mat-form-field>
                <input matInput [(ngModel)]="formDataNoId.ownerEmail" type="email" name="ownerEmail"
                  placeholder="Owner email" required #nameInput="ngModel"
                  pattern="[a-zA-Z0-9.-]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{3,}">
                <mat-error *ngIf="nameInput.invalid && (nameInput.dirty || nameInput.touched)" class="error">
                  Owner email is invalid.
                </mat-error>
              </mat-form-field>
            </div>
            <div>
              <mat-form-field>
                <input matInput [(ngModel)]="formDataNoId.ownerPhone" type="text" name="ownerPhone"
                  placeholder="Owner phone" required #nameInput="ngModel">
                <mat-error *ngIf="nameInput.invalid && (nameInput.dirty || nameInput.touched)" class="error">
                  Owner phone cannot be empty.
                </mat-error>
              </mat-form-field>
            </div>
          </mat-card>
        </ng-template>

        <ng-template #modalFooter>
          <button nz-button nzType="default" (click)="handleCancelEditor()">Cancel</button>
          <button nz-button nzType="danger" (click)="showDeleteConfirm(formData.id)">Delete</button>
          <button nz-button nzType="primary" (click)="onEditConfirmButtonClick(formDataNoId, formData.id)"
            [disabled]="editClientForm.form.invalid">Confirm edit</button>
        </ng-template>
      </nz-modal>
    </form>
  </tbody>
</nz-table>

<nz-dropdown-menu #menu="nzDropdownMenu">
  <div class="search-box">
    <input type="text" nz-input placeholder="Search name" [(ngModel)]="searchValue" />
    <button nz-button nzSize="small" nzType="primary" (click)="search()" class="search-button">
      Search
    </button>
    <button nz-button nzSize="small" (click)="reset()">Reset</button>
  </div>
</nz-dropdown-menu>
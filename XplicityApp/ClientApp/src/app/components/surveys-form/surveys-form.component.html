<form [formGroup]="form" (ngSubmit)="onSubmit(form.value)" style="height: 670px; width: 500px;" class="alignCenter">
    <h1 mat-dialog-title style="margin-top:0;">Add a new survey</h1>
    <input style="width: 300px; font-size:20px;" matInput type="text" placeholder="Enter the title..." formControlName="title">
    <div><mat-checkbox color="primary" formControlName="anonymousAnswers">Anonymous answers</mat-checkbox></div>
    
    <mat-card class="scroll"  formArrayName="questions">
<div *ngFor="let question of form.get('questions')['controls']; let i = index" formGroupName="{{i}}" [ngStyle]="{'background-color':getQuestionColor(i)}" style="padding-bottom: 5px;">
            
            <div class="form-group">
            <div style="margin:0; top:0; width: 50px; left:0; font-size:18px; display: inline-block;">{{i + 1}}</div>
            <mat-form-field style="width: 370px;">
                <input formControlName="questionText" matInput type="text" placeholder="Question text">
            </mat-form-field>
            <button mat-icon-button color="warn" type="button" (click)="deleteQuestion(i)"><mat-icon>clear</mat-icon></button>
        </div>

            <div>
                <mat-select formControlName="type" style="width: 150px;" name="type" class="answerType" placeholder="Answer type">
                    <mat-option [value]="0">
                        Text entry
                    </mat-option>
                    <mat-option [value]="1">
                        Multiple choice
                    </mat-option>
                    <mat-option [value]="2">
                        Likert scale
                    </mat-option>
                    <mat-option [value]="3">
                        Ranking
                    </mat-option>
                </mat-select>
              </div>

            <div *ngIf="isMultipleChoice(i)" formArrayName="choices">
                <div class="form-group" *ngFor="let choice of question.controls.choices.controls; let j = index" formGroupName="{{j}}">
                    <label>{{j+1}}) </label>
                    <mat-form-field style="width: 330px; margin-bottom: -1.25em">
                       <input formControlName="choiceText" matInput type="text">
                    </mat-form-field>
                    <button mat-icon-button color="warn" type="button" (click)="deleteChoice(i,j)"><mat-icon>clear</mat-icon></button>
                </div>
                <button mat-icon-button color="primary" type="button" (click)="addChoice(i)"><mat-icon>plus_one</mat-icon></button>
            </div>
        </div>

    <button class="buttonn" type="button" style="width: 100%;" (click)="addQuestion()">New question</button>
</mat-card>

<mat-dialog-actions align="end">
    <button mat-flat-button color="primary" type="submit">
      Add Survey
    </button>
    <button mat-flat-button color="warn" [mat-dialog-close]>
      Cancel
    </button>
</mat-dialog-actions>
</form>



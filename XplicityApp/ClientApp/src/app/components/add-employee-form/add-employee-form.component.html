<form #newEmployeeForm="ngForm">
    <h1 mat-dialog-title>Add new employee</h1>
    <mat-card>
        <div class="divider">
            <div>
                <mat-form-field>
                    <input matInput [(ngModel)]="data.newUser.name" name="name" placeholder="Employee name" required #nameInput="ngModel" pattern="[a-zA-ZąčęėįšųūžĄČĘĖĮŠŲŪŽ]*">
                    <mat-error *ngIf="nameInput.invalid" class="error">
                        Please enter a valid name.
                    </mat-error>
                </mat-form-field>
            </div>
            <div>
                <mat-form-field>
                    <input matInput [(ngModel)]="data.newUser.surname" name="surname" placeholder="Employee surname" required #surnameInput="ngModel" pattern="[a-zA-ZąčęėįšųūžĄČĘĖĮŠŲŪŽ]*">
                    <mat-error *ngIf="surnameInput.invalid" class="error">
                        Please enter a valid surname.
                    </mat-error>
                </mat-form-field>
            </div>
        </div>
        <div class="divider">
            <div>
                <mat-form-field>
                    <input matInput [(ngModel)]="data.newUser.email" type="email" name="email" placeholder="Employee email" #emailInput="ngModel" required email>
                    <mat-error *ngIf="emailInput.invalid" class="error">
                        Please enter a valid email.
                    </mat-error>
                </mat-form-field>
            </div>
            <div>
                <mat-form-field>
                    <input matInput [(ngModel)]="data.newUser.password" type="password" name="password" placeholder="Employee password" required minlength="6" #passwordInput="ngModel">
                    <mat-error *ngIf="passwordInput.errors?.required" class="error">
                        Please enter password.
                    </mat-error>
                    <mat-error *ngIf="passwordInput.errors?.minlength" class="error">
                        Enter at least 6 symbols.
                    </mat-error>
                </mat-form-field>
            </div>
        </div>
        <div class="divider">
            <div>
                <mat-form-field>
                    <mat-select [(ngModel)]="data.newUser.clientId" id="clientDropdown" name="client" placeholder="Client">
                        <mat-option [value]="0">No client</mat-option>
                        <div *ngFor="let client of data.clients">
                            <mat-option [value]="client.id">{{client.companyName}}</mat-option>
                        </div>
                    </mat-select>
                </mat-form-field>
            </div>
            <div>
                <mat-form-field>
                    <input matInput [(ngModel)]="data.newUser.worksFromDate" type="date" name="workStart" placeholder="Started working from date" required #workStartInput="ngModel">
                    <mat-error *ngIf="workStartInput.invalid" class="error">
                        Date cannot be empty.
                    </mat-error>
                </mat-form-field>
            </div>
        </div>
        <div class="divider">
            <div>
                <mat-form-field>
                    <input matInput [(ngModel)]="data.newUser.birthdayDate" type="date" name="birthday" placeholder="Employee birthday date" required #birthdayInput="ngModel">
                    <mat-error *ngIf="birthdayInput.invalid" class="error">
                        Date cannot be empty.
                    </mat-error>
                </mat-form-field>
            </div>
            <div>
                <mat-form-field>
                    <input matInput [(ngModel)]="data.newUser.healthCheckDate" name="healthCheck" type="date" placeholder="Employee health check-up date" required #healthInput="ngModel">
                    <mat-error *ngIf="healthInput.invalid" class="error">
                        Date cannot be empty.
                    </mat-error>
                </mat-form-field>
            </div>
        </div>
        <div class="divider">
            <div>
                <mat-form-field>
                    <mat-select [(ngModel)]="data.newUser.daysOfVacation" name="daysOfVacation" placeholder="Days of vacation" #daysInput="ngModel">
                        <mat-option [value]="20">20</mat-option>
                        <mat-option [value]="25">25</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div>
                <mat-form-field>
                    <mat-select [(ngModel)]="data.newUser.parentalLeaveLimit" name="parentalLeaveLimit" placeholder="Parental leave limit" #parentalInput="ngModel">
                        <mat-option [value]="0">0</mat-option>
                        <mat-option [value]="1">1</mat-option>
                        <mat-option [value]="2">2</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>
        <div class="divider">
            <div>
                <mat-form-field>
                    <mat-select [(ngModel)]="data.newUser.role" name="role" placeholder="Employee role" #roleInput="ngModel">
                        <mat-option *ngFor="let role of data.roles" [value]="role.name">{{role.name}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div>
                <mat-form-field>
                    <input matInput [(ngModel)]="data.newUser.position" name="position" placeholder="Employee position" required #positionInput="ngModel">
                    <mat-error *ngIf="positionInput.invalid" class="error">
                        Position cannot be empty.
                    </mat-error>
                </mat-form-field>
            </div>
        </div>
        <div class="divider">
            <div>
                <mat-checkbox [(ngModel)]="data.newUser.IsManualHolidaysInput" name="IsManualHolidaysInput">
                    Enter available holidays manually:
                </mat-checkbox>
            </div>
            <div *ngIf="data.newUser.IsManualHolidaysInput">
                <mat-form-field>
                    <input matInput [(ngModel)]="data.newUser.freeWorkDays" name="freeWorkDays" type="number" step="0.1" placeholder="Employee holidays">
                </mat-form-field>
            </div>
        </div>
    </mat-card>
    <mat-card>
        <button mat-flat-button color="primary" [mat-dialog-close]="data.newUser" [disabled]="!newEmployeeForm.form.valid">
          Add employee
        </button>
        <button mat-flat-button color="warn" class="floatRight" [mat-dialog-close]>Cancel</button>
    </mat-card>
</form>